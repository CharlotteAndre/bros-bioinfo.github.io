function getTree() {
  var data = 
[
  {"type":"directory",href:"#fh5co-work",text:"M1",nodes:[
    {"type":"directory",href:"#fh5co-work",text:"SEMESTRE1",custom:"18 1051",nodes:[
      {"type":"directory",href:"#fh5co-work",text:"ALGO_PROG",custom:"18 1051",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"ALGO",custom:"18 1051",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/ALGO/algo",text:"algo",custom:"18 1051"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"PROG",custom:"18 1051",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"PROJET",custom:"18 1051",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/PROJET/Compte_rendu",text:"Compte_rendu",custom:"18 1051"},
          ]},
          {"type":"directory",href:"#fh5co-work",text:"TD",custom:"18 1051",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/TD/Exos_baldacci_py",text:"Exos_baldacci_py",custom:"18 1051"},
          ]},
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/Intro_programmation",text:"Intro_programmation",custom:"18 1051"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"USI",custom:"18 1051",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"TD",custom:"18 1051",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/1_Unix",text:"1_Unix",custom:"18 1051"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/2_Unix",text:"2_Unix",custom:"18 1051"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/3_Processus",text:"3_Processus",custom:"18 1051"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/4_Shell",text:"4_Shell",custom:"18 1051"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/7_Utilitaires",text:"7_Utilitaires",custom:"18 1051"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/shell_seb",text:"shell_seb",custom:"18 1051"},
          ]},
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/Utilisation_systeme_info",text:"Utilisation_systeme_info",custom:"18 1051"},
        ]},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"IMAGE_NUM",custom:"18 1108",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"TD",custom:"18 1051",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"TD1",custom:"18 1051",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/TD/TD1/ImageJ_td1",text:"ImageJ_td1",custom:"18 1051"},
          ]},
        ]},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/Image",text:"Image",custom:"18 1051"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/Javascript",text:"Javascript",custom:"18 1051"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"OMIC_BIOINFO",custom:"18 1051",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Omic_bioinfo",text:"Omic_bioinfo",custom:"18 1051"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Philogenie",text:"Philogenie",custom:"18 1051"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Recherche_sequence",text:"Recherche_sequence",custom:"18 1051"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"STATS",custom:"18 1051",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"TD2",custom:"18 1051",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/TD2/TD2",text:"TD2",custom:"18 1051"},
        ]},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/Intro_stats",text:"Intro_stats",custom:"18 1051"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/Sequence_chronologique",text:"Sequence_chronologique",custom:"18 1051"},
      ]},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"SEMESTRE2",custom:"1301427",nodes:[
      {"type":"directory",href:"#fh5co-work",text:"ALGO",custom:"1301408",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/ALGO/Arbre",text:"Arbre",custom:"1301616"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"BDD",custom:"1201030",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/BDD/bdd",text:"bdd",custom:"1211510"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/BDD/TD1",text:"TD1",custom:"1121627"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"PROG",custom:"1301427",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/PROG/Java",text:"Java",custom:"1171042"},
      ]},
    ]},
  ]},
  {"type":"directory",href:"#fh5co-work",text:"POUR_ALLER_PLUS_LOIN",nodes:[
    {"type":"file",href:"http://bros-bioinfo.github.io/COURS/POUR_ALLER_PLUS_LOIN/emacs",text:"emacs",custom:"18 1051"},
    {"type":"file",href:"http://bros-bioinfo.github.io/COURS/POUR_ALLER_PLUS_LOIN/LaTex",text:"LaTex",custom:"18 1051"},
  ]},
  {"type":"directory",href:"#fh5co-work",text:"TUTO_FICHES",nodes:[
    {"type":"directory",href:"#fh5co-work",text:"PYTHON",custom:"18 1051",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/1-variables-et-types-python.pdf",text:"1-variables-et-types-python.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/2-conditionnelles-boucles.pdf",text:"2-conditionnelles-boucles.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/3-fonctions.pdf",text:"3-fonctions.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/apprendre_python3_5(G_Swinnen).pdf",text:"apprendre_python3_5(G_Swinnen).pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/reponse_tutorat",text:"reponse_tutorat",custom:"18 1051"},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"USI",custom:"18 1051",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/USI/correctionQCM",text:"correctionQCM",custom:"18 1051"},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"WEB",custom:"18 1051",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-1.pdf",text:"IMAJS-1.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-2.pdf",text:"IMAJS-2.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-3.pdf",text:"IMAJS-3.pdf",custom:"18 1051"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-4.pdf",text:"IMAJS-4.pdf",custom:"18 1051"},
    ]},
  ]}
]
;
return data;
}

var $searchableTree=$("#tree").treeview({
data: getTree(),
enableLinks: true,
showBorder: false,
showIcon: true,
showCheckbox: false,
expandIcon: "fa fa-folder",
collapseIcon: "fa fa-folder-open",
emptyIcon: "fa fa-file-text-o",
tags: ["available"],
showTags: true,

// colors
  color: "#428bca",
  backColor: undefined,
  borderColor: undefined,
  onhoverColor: "#F5F5F5",
  selectedColor: "#FFFFFF",
  selectedBackColor: "#428bca",
  searchResultColor: "#D9534F",
  searchResultBackColor: undefined,

onNodeSelected: function(event, node) {
    if (node.nodes == undefined) {
      // sends node info to another element
    } else if (node.state.expanded) {
      // TODO collapse children
      collapseNode(node.nodeId);
    } else {
      // TODO expand children
      expandNode(node.nodeId);
    }
  //  var children = node["nodes"];
//    alert( node["nodes"][0].custom ) ;
  }

});




// SEARCH


var search = function(e) {
  var pattern = $("#input-search").val();
  var options = {
    ignoreCase: true,
    exactMatch: false,
    revealResults: true
  };
  var results = $searchableTree.treeview("search", [ pattern, options ]);

  var output = "<p>" + results.length + " matches found</p>";
  $.each(results, function (index, result) {
    output += "<p>- " + result.text + "</p>";
  });
  $("#search-output").html(output);
}

$("#btn-search").on("click", search);
//$("#input-search").on("keyup", search);



$("#btn-clear-search").on("click", function (e) {
  $searchableTree.treeview("clearSearch");
  $("#input-search").val("");
  $("#search-output").html("");
  $("#tree").treeview("collapseAll", { silent: true }); // COLLAPSE ALL

});


//COLLAPSE
$("#tree").treeview("collapseAll", { silent: true }); // COLLAPSE ALL AT START

function collapseNode(nodeId) {
  $("#tree").treeview("collapseNode", [nodeId]);
}

function expandNode(nodeId) {
  $("#tree").treeview("expandNode", [nodeId]);
}
//});

$("#recent").load("last-modified-files.txt");





