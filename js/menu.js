function getTree() {
  var data = 
[
  {"type":"directory",href:"#fh5co-work",text:"M1",nodes:[
    {"type":"directory",href:"#fh5co-work",text:"SEMESTRE1",custom:"9121317",nodes:[
      {"type":"directory",href:"#fh5co-work",text:"ALGO_PROG",custom:"9111352",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"ALGO",custom:"9111352",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/ALGO/algo",text:"algo",custom:"9111352"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"PROG",custom:"9111352",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"PROJET",custom:"9111352",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/PROJET/Compte_rendu",text:"Compte_rendu",custom:"9111352"},
          ]},
          {"type":"directory",href:"#fh5co-work",text:"TD",custom:"9111352",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/TD/Exos_baldacci_py",text:"Exos_baldacci_py",custom:"9111352"},
          ]},
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/PROG/Intro_programmation",text:"Intro_programmation",custom:"9111352"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"USI",custom:"9111352",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"TD",custom:"919  806",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/1_Communications",text:"1_Communications",custom:"919  806"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/2_Unix",text:"2_Unix",custom:"919  806"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/3_Emacs",text:"3_Emacs",custom:"919  806"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/4_Unix",text:"4_Unix",custom:"9201210"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/5_Processus",text:"5_Processus",custom:"919  806"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/7_Utilitaires",text:"7_Utilitaires",custom:"9111352"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/8_Shell",text:"8_Shell",custom:"919  806"},
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/TD/shell_seb",text:"shell_seb",custom:"9111352"},
          ]},
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ALGO_PROG/USI/Utilisation_systeme_info",text:"Utilisation_systeme_info",custom:"9111352"},
        ]},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"ANGLAIS",custom:"9121317",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/ANGLAIS/English",text:"English",custom:"9131112"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"IMAGE_NUM",custom:"9181021",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"TD",custom:"9111352",nodes:[
          {"type":"directory",href:"#fh5co-work",text:"TD1",custom:"9111352",nodes:[
            {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/TD/TD1/ImageJ_td1",text:"ImageJ_td1",custom:"9191111"},
          ]},
        ]},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/Image",text:"Image",custom:"9181021"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/IMAGE_NUM/Javascript",text:"Javascript",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"OMIC_BIOINFO",custom:"9121202",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Cours_O2018",text:"Cours_O2018",custom:"9181022"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Omic_bioinfo",text:"Omic_bioinfo",custom:"9181157"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Philogenie",text:"Philogenie",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/OMIC_BIOINFO/Recherche_sequence",text:"Recherche_sequence",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"STATS",custom:"9241044",nodes:[
        {"type":"directory",href:"#fh5co-work",text:"TD1",custom:"9212236",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/TD1/R_EN_TUTORIAL.pdf",text:"R_EN_TUTORIAL.pdf",custom:"9171435"},
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/TD1/TD1.pdf",text:"TD1.pdf",custom:"9212235"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"TD2",custom:"9111352",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/TD2/TD2",text:"TD2",custom:"9111352"},
        ]},
        {"type":"directory",href:"#fh5co-work",text:"TD_papier",custom:"9241042",nodes:[
          {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/TD_papier/td_papier",text:"td_papier",custom:"925  815"},
        ]},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/Intro_stats",text:"Intro_stats",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE1/STATS/Sequence_chronologique",text:"Sequence_chronologique",custom:"9111352"},
      ]},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"SEMESTRE2",custom:"9111352",nodes:[
      {"type":"directory",href:"#fh5co-work",text:"ALGO",custom:"9111352",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/ALGO/Arbre",text:"Arbre",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/ALGO/graphe",text:"graphe",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/ALGO/td5",text:"td5",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"BDD",custom:"9111352",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/BDD/bdd",text:"bdd",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/BDD/conceptionBDD",text:"conceptionBDD",custom:"9111352"},
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/BDD/TD1",text:"TD1",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"MODELISATION",custom:"9111352",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/MODELISATION/topo",text:"topo",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"NGS",custom:"9111352",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/NGS/TD_GALAXY.pdf",text:"TD_GALAXY.pdf",custom:"9111352"},
      ]},
      {"type":"directory",href:"#fh5co-work",text:"PROG",custom:"9111352",nodes:[
        {"type":"file",href:"http://bros-bioinfo.github.io/COURS/M1/SEMESTRE2/PROG/Java",text:"Java",custom:"9111352"},
      ]},
    ]},
  ]},
  {"type":"directory",href:"#fh5co-work",text:"POUR_ALLER_PLUS_LOIN",nodes:[
    {"type":"file",href:"http://bros-bioinfo.github.io/COURS/POUR_ALLER_PLUS_LOIN/emacs",text:"emacs",custom:"9111352"},
    {"type":"file",href:"http://bros-bioinfo.github.io/COURS/POUR_ALLER_PLUS_LOIN/LaTex",text:"LaTex",custom:"9111352"},
  ]},
  {"type":"directory",href:"#fh5co-work",text:"TUTO_FICHES",nodes:[
    {"type":"directory",href:"#fh5co-work",text:"PYTHON",custom:"9111352",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/1-variables-et-types-python.pdf",text:"1-variables-et-types-python.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/2-conditionnelles-boucles.pdf",text:"2-conditionnelles-boucles.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/3-fonctions.pdf",text:"3-fonctions.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/apprendre_python3_5(G_Swinnen).pdf",text:"apprendre_python3_5(G_Swinnen).pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/PYTHON/reponse_tutorat",text:"reponse_tutorat",custom:"9111352"},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"USI",custom:"9111352",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/USI/correctionQCM",text:"correctionQCM",custom:"9111352"},
    ]},
    {"type":"directory",href:"#fh5co-work",text:"WEB",custom:"9111352",nodes:[
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-1.pdf",text:"IMAJS-1.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-2.pdf",text:"IMAJS-2.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-3.pdf",text:"IMAJS-3.pdf",custom:"9111352"},
      {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/WEB/IMAJS-4.pdf",text:"IMAJS-4.pdf",custom:"9111352"},
    ]},
    {"type":"file",href:"http://bros-bioinfo.github.io/COURS/TUTO_FICHES/Tuto_jithub",text:"Tuto_jithub",custom:"9121206"},
  ]}
]
;
return data;
}

var $searchableTree=$("#tree").treeview({
data: getTree(),
enableLinks: true,
showBorder: false,
showIcon: true,
showCheckbox: false,
expandIcon: "fa fa-folder",
collapseIcon: "fa fa-folder-open",
emptyIcon: "fa fa-file-text-o",
tags: ["available"],
showTags: true,

// colors
  color: "#428bca",
  backColor: undefined,
  borderColor: undefined,
  onhoverColor: "#F5F5F5",
  selectedColor: "#FFFFFF",
  selectedBackColor: "#428bca",
  searchResultColor: "#D9534F",
  searchResultBackColor: undefined,

onNodeSelected: function(event, node) {
    if (node.nodes == undefined) {
      // sends node info to another element
    } else if (node.state.expanded) {
      // TODO collapse children
      collapseNode(node.nodeId);
    } else {
      // TODO expand children
      expandNode(node.nodeId);
    }
  //  var children = node["nodes"];
//    alert( node["nodes"][0].custom ) ;
  }

});




// SEARCH


var search = function(e) {
  var pattern = $("#input-search").val();
  var options = {
    ignoreCase: true,
    exactMatch: false,
    revealResults: true
  };
  var results = $searchableTree.treeview("search", [ pattern, options ]);

  var output = "<p>" + results.length + " matches found</p>";
  $.each(results, function (index, result) {
    output += "<p>- " + result.text + "</p>";
  });
  $("#search-output").html(output);
}

$("#btn-search").on("click", search);
//$("#input-search").on("keyup", search);



$("#btn-clear-search").on("click", function (e) {
  $searchableTree.treeview("clearSearch");
  $("#input-search").val("");
  $("#search-output").html("");
  $("#tree").treeview("collapseAll", { silent: true }); // COLLAPSE ALL

});


//COLLAPSE
$("#tree").treeview("collapseAll", { silent: true }); // COLLAPSE ALL AT START

function collapseNode(nodeId) {
  $("#tree").treeview("collapseNode", [nodeId]);
}

function expandNode(nodeId) {
  $("#tree").treeview("expandNode", [nodeId]);
}
//});

$("#recent").load("last-modified-files.txt");





